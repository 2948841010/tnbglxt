# 系统启动说明

## 环境要求

- Python 3.8+
- MySQL 8.0+
- MongoDB 4.0+
- Redis 6.0+（可选，用于缓存）
- Node.js 16+（前端）

## 启动顺序

### 1. 启动数据库服务

```bash
# MySQL（确保已运行）
net start mysql

# MongoDB
mongod

# Redis（可选）
redis-server
```

### 2. 启动 MCP 服务器

```bash
cd mcp
python server.py
```
端口：50001

### 3. 启动 RAG 知识库服务

```bash
cd rag
python retrieval_api.py
```
端口：8001
- API 文档：http://localhost:8001/docs
- MCP 查询接口：POST http://localhost:8001/mcp/query

### 4. 启动 Agent 后端

```bash
cd agent
python main.py
```
端口：8081

### 5. 启动用户前端

```bash
cd fronted
npm install
npm run dev
```
端口：3000

### 6. 启动 RAG 管理前端（可选）

```bash
cd rag/rag-frontend
npm install
npm run dev
```
端口：8002
- 用于管理知识库文档、查看和编辑知识条目

## 服务端口汇总

| 服务 | 端口 | 说明 |
|------|------|------|
| MCP Server | 50001 | 工具调用服务 |
| RAG API | 8001 | 知识库检索服务 |
| Agent API | 8081 | AI Agent 后端 |
| 用户前端 | 3000 | 用户界面 |
| RAG 管理前端 | 8002 | 知识库管理界面 |

## 验证服务

- Agent 健康检查：http://localhost:8081/health
- RAG 健康检查：http://localhost:8001/health
- MCP 连接：http://localhost:50001/sse

## 常见问题

1. **MCP 连接失败**：确保 MCP 服务器先于 Agent 启动
2. **数据库连接失败**：检查 `agent/config.py` 中的数据库配置
3. **端口占用**：使用 `netstat -ano | findstr :8081` 检查端口
4. **RAG 搜索无结果**：确保已上传文档到知识库
5. **Redis 未启动**：不影响核心功能，只是没有缓存加速
